pkg-cacher (1.0.0_ unstable; urgency=low

  * Renamed to pkg-cacher.
  * Modified to support RedHat.

apt-cacher (1.6.4) unstable; urgency=low

  * Add interface option (closes: #483666)
  * Fix locking for checksum database if failed thread detected.

 -- Mark Hindley <mark@hindley.org.uk>  Thu, 05 Jun 2008 08:41:09 +0100

apt-cacher (1.6.3) unstable; urgency=low

  * Don't send a response when CGI connection is closed (closes: #448092)
  * Add option to specify configfile for apt-cacher-report.pl (closes: #480004)
  * Support jigdo (closes: #482422)

 -- Mark Hindley <mark@hindley.org.uk>  Sun, 25 May 2008 11:59:03 +0100

apt-cacher (1.6.2) unstable; urgency=low

  * Handle SIGPIPE.
  * Don't use ETag header to check freshness by default -- some
    servers are not providing reliable ETags. You can still enable the
    code by setting configitem use_etags to non-nil.
  * Ensure correct file is returned if cached file is being
    refreshed. (closes: #472669, #473001)  
  * Update README and conffile to reflect usage of libberkeleydb-perl.
  * Ensure checksumming database is correctly initialised for every
    process (closes: #460020)
  * Ensure error messages do not go to STDOUT (closes: #448092)
  * Correctly drop all root privileges (closes: #470092).
  * apt-cacher-cleanup.pl: if clean_cache is 0, print warning on
    STDERR. Redirect to /dev/null in cron (closes: #462230)
  * Add dependency on libdigest-sha1-perl and libwww-perl (for HTTP::Date)
    (closes: #461899, #462689)
  * If path_map contains multiple servers, remove HTTP error from the
    first before trying the next. Thanks to Anderson Lizardo for
    patch. (closes: #462948)
  * Remove pointless abs_path, which sometimes fails. (closes: #468771)
  * Depend on libwww-curl-perl 3.12 at least. (closes: #462523)

 -- Mark Hindley <mark@hindley.org.uk>  Sun, 30 Mar 2008 12:57:12 +0100

apt-cacher (1.6.1) unstable; urgency=medium

  * Security fix -- only use red to apply pdiffs (hence urgency)
  * Correct typo in libberkeleydb-perl rependency (closes: #459842)
  * Fix handling of If-Modified-Since request
  * Implement timeout for connecting to checksum database to prevent hangs
  * Bump Standards Version

 -- Mark Hindley <mark@hindley.org.uk>  Thu, 10 Jan 2008 09:06:44 +0000

apt-cacher (1.6.0) unstable; urgency=low

  * Major new release.
  * IPv6 support (using libcurl and optional libio-socket-inet6-perl)
    (closes: #447993, #451700).  
  * Experimental support for patching cached Packages and Sources with
    pdiffs. (closes: #427695)
  * Checksumming rewritten and now uses Berkeley DB for speed and reduced
    resource utilisation.  
  * Checksum database manipulation with apt-cacher-cleanup.
  * Daemon mode can now listen on multiple addresses.
  * ETag support.
  * Respect Cache-Control headers (closes: #369433).
  * Don't assume host is not reachable if use_proxy set. Thanks to Ralph
    Rößner for patch. (closes: #447033)
  * apt-cacher-cleanup: verify SHA1 of debs and remove if mismatch.

 -- Mark Hindley <mark@hindley.org.uk>  Wed, 05 Dec 2007 10:45:57 +0000

apt-cacher (1.5.5) unstable; urgency=low
  
  * Make apt-cacher-report.pl more tolerant of logfile corruption. Thanks
    to Olaf Schulz for patch (closes: #366348, #444677)
  * Don't change /etc/apache/httpd.conf if no apt-cacher config found.
  * Move shared install/remove code to apt-cacher-lib.
  * Add link to /usr/lib/cgi-bin for non-apache httpd servers.
  * README.Debian: suggest workaround to cache for both Ubuntu and Debian
    distributions (closes: #354925, #366624, #415398)
  * Check for Host header in HTTP/1.1 request.
  * Respect no-cache directives in request and pass through to upstream.
  * apt-cacher-format-transition: Remove accept \r\n in headers on import
    (closes: #355157). Add informational messages.
  * Keep command-line options on config reload (SIGHUP).
  * Differentiate between absolute URIs. Can be HTTP 1.1 proxy or HTTP 1.3. See
    rfc2616. (closes: 387449, #413391)
  * Handle SIGUSR1 to toggle debug ouput.
  * Fix man page CGI mode prefix.
  * Control checksumming with config option checksum
  * Lists in config file are delimited by ',' or ';'
  * Check installation directories and logfiles on startup. Recreate if
    necessary (closes: #370453)
  * No default http_proxy and http_proxy_auth.
  * Support vmlinuz and initrd.gz files for Debian-live.
  * Significant rewrite of manpage. (closes: #442800, #364361)
  * Restart after rotating logfiles (closes: #414156, #390585)
  * apt-cache-report: run as user:group from config file (closes: #383480)
  * Actually support rate limit suffixes as specified in man page (closes: #410920)  
  * Return Connection: close even if keep-alive requested for 404 error
    (closes: #322299, #384210)
  * Rationalise example usage in usage_error. Use Sys::Hostname to build
    the example. Configfile example_sources_line is no longer
    used. (closes: #365507)
  * Dynamically generate configuration info in usage_error.
  * Check size of cached files. Warn and refresh if mismatch 
    (closes: #373280, #412743, #366648)
  * Add support for index.db-*.gz files as used by apt-listbugs. (closes: #364904)
  * Decode ascii hex codes in URL. (closes: #394541)
  * Add support for Translation-*.bz2 files.
  * Rationalise locking in apt-cacher-cleanup. Based on patch from Adrian
    Bridgett (closes: #428131)
  * apt-cacher-import: check return of rename and die with helpful error
    message if it fails. (closes: #355160)

 -- Mark Hindley <mark@hindley.org.uk>  Wed, 03 Oct 2007 08:59:54 +0100
  
apt-cacher (1.5.4) unstable; urgency=low

  * New maintainer (Closes: #403584)
  * apt-cacher: Correctly set version number when building package
  * apt-cacher-cleanup: add simulate option to show what would be done and
    offline mode to control refresh of index files
  * Add offline_mode to config file.
  * apt-cacher-cleanup: fix option handling
  * move setup_ownership() to apt-cacher-lib
  * apt-cacher-cleanup: run as user:group from config file
  * Bump standards version
  * Fix manpage warning: 52: a special character is not allowed in a name
    and missing line when rendered (closes: 374422)
  * Add LSB header to init. (closes: #384721)
  * apt-cacher-cleanup: provide warning if linking of file fails.
  * apt-cacher-cleanup: don't continue if there are empty index files in order to
    prevent unexpected deletion of cache contents (closes: #356292).  
  * Daemonize correctly (closes: #370446).
  * Fix typos and spelling (closes: #358988, #362730, #399157, #396677)
  * Build and lintian warning fixes:
	 Move debhelper compatibility to debian/compat.
	 Remove make distclean from debian/rules.
	 Put debhelper in Build-Depends not Build-Depends-Indep
	 Delete *-stamp on clean.
  * Don't cache index files that generate 404 error. Thanks to Dietrich
    Clauss <dc2@clauss.dyndns.org> (closes: #385961)
  * apt-cacher-cleanup: just delete empty .gz files (closes: #403453).

 -- Mark Hindley <mark@hindley.org.uk>  Thu, 06 Sep 2007 12:13:23 +0100

apt-cacher (1.5.3) unstable; urgency=medium

  * special case for pdiff file name generation (closes: #335202). Pdiff
    caching should now (finally) work correctly. Also checks and expiration of
    pdiff files (using Index lists) done in apt-cacher-cleanup.pl
  * apt-cacher-cleanup hardened, locking files to eliminate any possible
    situation with not having the index files ready
  * added instructions to the cleanup error message to remove
    broken/undownloadable files if files from a repository are to be purged
    (closes: #327817)
  * ignoring empty .bz2 files since they are optional and (naturally) coming
    from unsuccessfull downloads (closes: #354533, #354548, #354428)

 -- Eduard Bloch <blade@debian.org>  Wed, 01 Mar 2006 16:23:22 +0100

apt-cacher (1.5.2) unstable; urgency=low

  * Minor bugfix release
  * Improvements of the package description, mentioning approx/apt-proxy
    (closes: #352020)
  * always logging the disk-full messages, if possible, not only in debug mode
  * checking for exit status when reading index files in cleanup, catching
    file corruption cases (closes: #353152)
  * spelling error fixes in the manpage, thanks to A. Costa (closes: 353970)

 -- Eduard Bloch <blade@debian.org>  Wed,  23 Feb 2006 19:39:24 +0100

apt-cacher (1.5.1) unstable; urgency=low

  * make flock depend on open success in cleanup (closes: #351938)
  * made download code handle write errors better (or even just correct), also
    added cleanup code for potential leftovers to apt-cacher-cleanup.pl
  * documented the offline_mode switch in the manpage
  * documented the proxy mode installation in the manpage

 -- Eduard Bloch <blade@debian.org>  Wed, 08 Feb 2006 19:20:31 +0100

apt-cacher (1.5) unstable; urgency=low

  * made request reader more robust
  * added more regexps to handle Fedora's APT clone's index files correctly
  * added a simple spec file from Srimal Jayawardena to contrib directory

 -- Eduard Bloch <blade@debian.org>  Fri, 27 Jan 2006 15:52:18 +0100

apt-cacher (1.4.3) unstable; urgency=low

  * checksums are not checked on index files any longer, they can change
  * tolerates full paths now (proxy kind), allows usage of apt-cacher as pure
    HTTP proxy without changing sources.list on all clients (closes: #349588)
  * experimental option offline_mode to simply avoid outgoing connections and
    deliver cached data only
  * added a HUP handler to reload the config
  * fixed a minor bug in the header parser, found with clients using LWP agent
    (closing connection too early). Now cascading of apt-cacher servers
    in daemon mode is possible.

 -- Eduard Bloch <blade@debian.org>  Fri, 27 Jan 2006 01:28:51 +0100

apt-cacher (1.4.2) unstable; urgency=low

  * reopening log files when a write fails
  * getgrnam/getpwnam considers undefined values now, thanks to Richard Antony
    Burton (closes: #348178)
  * additional data size checks when returning cached versions to detect
    possible file system corruption.
  * with checksum checking enabled, the checksum of downloaded content is
    stored additionaly to be available even if is not extracted from Packages
    files first. Does not cover initial download errors but local corruption.
  * code refactoring, ensured ownership change when running cleanup
  * it's called libdbd-sqlite3-perl! (fixed name of the package in Suggests)

 -- Eduard Bloch <blade@debian.org>  Sun, 22 Jan 2006 02:21:31 +0100

apt-cacher (1.4.1) unstable; urgency=low

  * set treshhold for unparsed lines back to old value but reseting it when a
    valid GET/HEAD request was accepted
  * workaround: closing connection after TE headers, apt confused sometimes

 -- Eduard Bloch <blade@debian.org>  Sun, 08 Jan 2006 15:19:24 +0100

apt-cacher (1.4) unstable; urgency=low

  * now really closes: #345878
  * renamed NEWS.Debian file to become correctly installed by debhelper (4.x).
    Thanks to Sven Hartge for pointing at the problem.

 -- Eduard Bloch <blade@debian.org>  Fri, 06 Jan 2006 03:08:57 +0100

apt-cacher (1.3) unstable; urgency=low

  * the "don't release after midnight" release
  * ignoring If-Modified-Since if Range field was seen, forcing
    local retransmissions of a file
  * removed a forgotten todo mark from the last changelog entry
  * actually changed the threshold for unparased lines now

 -- Eduard Bloch <blade@debian.org>  Fri, 06 Jan 2006 02:33:48 +0100

apt-cacher (1.2) unstable; urgency=low

  * allowed "Index" files but documented the "refetching" behaviour of cleanup
    in NEWS.Debian
  * using ISO 8601 format for date/time in report pages (closes: #327356)
  * spelling error fixes in apt-cacher.1 (closes: #337545)
  * increased the treshhold of unparsed request lines to stop throwing "Go
    away" messages
  * disabled the child reaper code (caused races). This restores the old
    behaviour of downloads not stopping on client exit.
  * moved setgid code before setuid code to make it actually work, also using
    standard perl variables instead of POSIX module (closes: #341348)
  * also removing /var/log/apt-cacher when purging (closes: #326050)
  * a bit code refactoring
  * more carefull forwarding of header fields on error reports. Solves a "bug"
    which resulted in apt-get hanging forever or becoming confused because it
    assumed a premature connection termination. Now it does keep the
    connection open while forwarding error status headers.
  * replace all underscores with / when reconstructing the URL which is not
    available if downloaded by an old apt-cacher version (closes: #345878)
  * updates to the manpage (FAQ, mistakes, more details) and
    apt-cacher-cleanup.pl help message (closes: #345286)
  * debian/copyright: FSF address update

 -- Eduard Bloch <blade@debian.org>  Fri, 06 Jan 2006 00:50:52 +0100

apt-cacher (1.1) unstable; urgency=low

  * setting ReuseAddr to avoid port collision with running instances on restart

 -- Eduard Bloch <blade@debian.org>  Mon, 26 Sep 2005 10:40:28 +0200

apt-cacher (1.0.12) unstable; urgency=high

  * set the CGI_MODE flag in apt-cacher.pl wrapper (closes: #324572)
  * a one-line fix for an obvious bug already slipped into testing, thus the
    severity choice

 -- Eduard Bloch <blade@debian.org>  Tue, 30 Aug 2005 10:33:09 +0200

apt-cacher (1.0.11) unstable; urgency=medium

  * the REMOTE_ADDR interpretation had unexpected side effects, script was
    executed in paranoid CGI mode when runned from apt-cacher-cleanup.pl, so
    CGI script has finally been separated: apt-cacher.pl as invoked by httpd
    sets clear flags and then executs the normal code (installed in a separate
    file now)
  * better controled termination of child processes now making restarts more
    reliable

 -- Eduard Bloch <blade@debian.org>  Sun, 21 Aug 2005 13:12:07 +0200

apt-cacher (1.0.10) unstable; urgency=low

  * manpage updates and hyphenisation fixes by Bastian Kleineidam 
    (closes: Bug#323955)
  * apt-cacher-import.pl: speedup (removed date calls) and using correct date
    specification from HTTP::Date

 -- Eduard Bloch <blade@debian.org>  Fri, 19 Aug 2005 22:21:26 +0200

apt-cacher (1.0.9) unstable; urgency=low

  * pidfile could have been created too late with -d, fixed
  * -p option documented

 -- Eduard Bloch <blade@debian.org>  Fri, 19 Aug 2005 10:16:23 +0200

apt-cacher (1.0.8) unstable; urgency=medium

  * checks for valid host/uri without warnings
  * added -R N option to try to bind the socket N times with 5s interval
  * -d forks away only after the daemon is ready
  * added a TERM handler to close all connections and reliable shut down the
    daemon
  * interpretation of REMOTE_ADDR even in inetd / direct call mode
  * fix for the path_map parser, correct separator detection

 -- Eduard Bloch <blade@debian.org>  Fri, 19 Aug 2005 02:37:54 +0200

apt-cacher (1.0.7) unstable; urgency=medium

  * fixed a nasty bug in apt-cacher-cleanup.pl (copy&paste with insufficient
    testing, closes: #323037)
  * better warnings in apt-cacher-cleanup.pl, --force disables the
    "downloability check"

 -- Eduard Bloch <blade@debian.org>  Sun, 14 Aug 2005 14:36:23 +0200

apt-cacher (1.0.6) unstable; urgency=low

  * added an evil script (apt-proxy-to-apt-cacher) to take relevant
    configuration data from apt-proxy and assimilate its cache
  * config file parser improvements: speedup and multiline support
  * new config option: path_map to map visible paths to one or multiple servers
  * new features: server-hopping (using alternative backends on failures) and
    recursive import from whole filesystems (eg. DVD), optionally read-only
    (making hard links or copies)

 -- Eduard Bloch <blade@debian.org>  Sat, 13 Aug 2005 14:41:09 +0200

apt-cacher (1.0.5) unstable; urgency=low

  * tolerate two slashes in the beginning of the location URL
  * closing connection on 404 errors to avoid apt-get freezes

 -- Eduard Bloch <blade@debian.org>  Wed, 10 Aug 2005 12:53:53 +0200

apt-cacher (1.0.4) unstable; urgency=low

  * now a real fix for the CGI status line output, fixes the accidential
    supressing of it in certain situations (closes: #322299)
  * apt-cacher-cleanup now removes orphaned .notify files (after few days)
    which could be left behind by the some download processes in version 1.0.2
    or after killing fetcher processes, system crashes, etc.
  * proper printing of usage info if the path has been omited
  * new option to print text with HTTP 410 messages, eg. to advise users to
    change sources.list to use apt-cacher in server mode

 -- Eduard Bloch <blade@debian.org>  Wed, 10 Aug 2005 11:48:38 +0200

apt-cacher (1.0.3) unstable; urgency=low

  * Fix for not outputing the HTTP status line in CGI mode (confused apache2)
  * added sanity checks for effective user ID in apt-cacher-cleanup.pl to stop
    poisoning the cache with files with wrong permissions

 -- Eduard Bloch <blade@debian.org>  Sun, 07 Aug 2005 10:37:32 +0200

apt-cacher (1.0.2) unstable; urgency=low

  * fixed a bug with apt-cacher-cleanup.pl and extract_sums method (which
    appeared with Sarge's Perl only and not before)
  * added a download success check in cleanup to not let it nuke the whole
    cache if the mirror server has been unreachable for some minutes

 -- Eduard Bloch <blade@debian.org>  Sat,  6 Aug 2005 15:58:31 +0200

apt-cacher (1.0.1) unstable; urgency=low

  * passing EXTRAOPT in the init script

 -- Eduard Bloch <blade@debian.org>  Sat,  6 Aug 2005 14:24:58 +0200

apt-cacher (1.0.0) unstable; urgency=low

  * more safe options parsing
  * added a config option for the address to listen on
  * moved user and group settings to the configuration file
  * cleanup and precache script updates
  * description update: a bit power selling to express what it actually does
  * init script added
  * created the symlink in /usr/sbin/apt-cacher. Kept the httpd configuration
    installation hooks for compatibility with existing setups.

 -- Eduard Bloch <blade@debian.org>  Sat, 06 Aug 2005 10:54:06 +0200

apt-cacher (0.9.12) experimental; urgency=low

  * parts of design reverted back to the old method:
    + separate fetcher threat, spawned as needed
    + error message passing much more safe and should now be really reliable
      with more than one reader
    + file handles cleanup

 -- Eduard Bloch <blade@debian.org>  Sat, 06 Aug 2005 01:20:38 +0200

apt-cacher (0.9.11) experimental; urgency=low

  * apt-cacher has been rewritten in the most parts:
    + can act as a stand-alone daemon, an inetd daemon or as user / CGI
      program (dropped dependency on httpd-cgi)
    + using libwww-perl as download agent, stopped using curl tool. Using
      libcurl3 instead is beeing considered
  * added bzip2 to dependency list (closes: #319709)
  * removed visible references to www.apt-cacher.org

 -- Eduard Bloch <blade@debian.org>  Thu, 04 Aug 2005 17:38:25 +0200

apt-cacher (0.9.10) unstable; urgency=high

  * SECURITY: replaces execution of curl in a shell environment (with possibly
    tainted command line parts) with a safe pipe construct

 -- Eduard Bloch <blade@debian.org>  Wed, 29 Jun 2005 09:26:07 +0200

apt-cacher (0.9.9) unstable; urgency=high

  * fixed signature of get_abort_time, thanks to Taco IJsselmuiden 
    (closes: #316197)

 -- Eduard Bloch <blade@debian.org>  Wed, 29 Jun 2005 09:23:44 +0200

apt-cacher (0.9.8) unstable; urgency=high

  * fixed fetch timeout handling and made it more robust, based on the patch
    from Darren Salt (closes: #315151)
  * allowed_locations checks workaround for ".." in the URIs which becomes
    neccessary with apt-0.6.x

 -- Eduard Bloch <blade@debian.org>  Tue, 28 Jun 2005 09:21:43 +0200

apt-cacher (0.9.7) unstable; urgency=low

  * fixed the apt-cacher-precache.pl script installation

 -- Eduard Bloch <blade@debian.org>  Sat, 18 Jun 2005 11:42:06 +0200

apt-cacher (0.9.6) unstable; urgency=low

  * "mv apt-precache.pl apt-cacher-precache.pl" (naming consistency) and
    improved it a lot (options to set a distfilter and add custom package
    lists)

 -- Eduard Bloch <blade@debian.org>  Sat, 18 Jun 2005 11:41:04 +0200

apt-cacher (0.9.5) unstable; urgency=low

  * changed file opening method to allow read-only access. Based on patch from
    Rob Walker <rob@tenfoot.org.uk> (closes: #312724)
  * "incomplete" log messages report MISS, not HIT (closes: #311485)
  * suggesting libdb-sqlite3-perl (closes: #311737)
  * auto-setting the version number in apt-cacher.pl (closes: #311735)
  * added the proxy auth support based on the patch from Achim Dreyer
    <adreyer@adreyer.de> with big warnings about password visibility and not
    showing the password to anyone in the report page
  * updated the apt-cacher.1 manpage to reflect the recent changes
  * added *.udeb and *.dsc to the list of importable files (closes: #312732)
  * removed the security/obscurity check from apt-cacher-cleanup.pl and
    added advisories for securing of the cache/mirror access to
    README.Debian (closes: #312038)
  * only purge step nukes the cache and only in the default location now

 -- Eduard Bloch <blade@debian.org>  Sat, 11 Jun 2005 09:38:51 +0200

apt-cacher (0.9.4) unstable; urgency=high

  * removed /var/{log,cache}/apt-cacher from debian/dirs to manage them
    without interferences via postinst/prerm, calling
    install.pl/remove.pl/upgrade.pl (closes: #310990). This bug was hidden
    before and came to daylight after the rewrite of the old (ownership
    overriding) code in 0.9.
  * fixed the size calculation in the access.log (closes: #311001)
  * found another stupid bug in install.pl, it removed the files README and
    README.txt in the directory where dpkg has been started
  * added more visible advisories to run apt-cacher-format-transition.pl in
    NEWS.Debian and README.Debian
  * commented out the allowed_locations example in apt-cacher.conf, it should
    not restrict by default

 -- Eduard Bloch <blade@debian.org>  Fri, 27 May 2005 18:20:49 +0200

apt-cacher (0.9.3) unstable; urgency=high

  * removed some forgotten debug statements and also a "testing" die; command
    in the checksumming lib (closes: #310393)
  * fixed the adding of CGI var separator ? in the sample sources.list URLs
    and used &nbsp; to not break the lines on extreme low-res monitors
    (closes: #310387)

 -- Eduard Bloch <blade@debian.org>  Tue, 24 May 2005 18:42:42 +0200

apt-cacher (0.9.2) unstable; urgency=low

  * added a possible solution for server redundancy with faked cache 
    serves to README.Debian (closes: #230796)
  * not blocking access if allowed_hosts was omited (restoring the default
    config behaviour used before the IPv6 patch)
  * "nice mode" in cleanup, refreshing the index files first and then
    continuing with low priority
  * transition of apt-cacher symlink to apt-cacher.conf in apache2
    configuration which most likely also fixes the last
    issue in another bug report (closes: #307579, #264147)
  * more verbose error messages with allowed_locations option, patch by
    Andreas J Koenig (closes: #309597)
  * removed obsolete references to www.apt-cacher.org from the report generator

 -- Eduard Bloch <blade@debian.org>  Sun, 22 May 2005 11:37:58 +0200

apt-cacher (0.9.1) unstable; urgency=medium

  * upload to unstable with few changes
  * fixed NEWS.Debian (header differed from changelog) and updated notes
  * added precache-by-Priority feature to apt-precache.pl

 -- Eduard Bloch <blade@debian.org>  Mon, 16 May 2005 12:29:12 +0200

apt-cacher (0.9) experimental; urgency=medium

  * New main maintainer (Jonathan & me -> Uploaders:)
  * new format, separates package contents and HTTP headers 
    (closes: #274975). The new script apt-cacher-format-transition.pl converts
    the old cached files to the new version and moves the parts to the new
    locations
  * used syswrite/sysread where appropriate to minimise effects of Perl
    buffering in combination with Apache2 (avoids apt-get's long 
    "waiting for headers" phase in most cases, still appears from time to
    time, but not soo often.
  * uses modification times of index files if configured, this should avoid
    desynchronisation of some files (closes: #180544). Used curl to get the
    HTTP head for that (wget was just too stupid with its timestamping
    abilities). By the way rewrote the fetcher code to use curl only, removing
    the wget depedency (closes: #277279)
  * rewrote large parts of unsafe code, worked around race conditions
    (closes:#251468), fixed some crap like inserting of status code into
    half-downloaded files (closes: #251660), really detached the fetcher
    thread from the reader when the file is initialy beeing downloaded, and
    made error code passing more reliable
  * removed another useless fork (thread-over-thread-over-thread, jeez...)
  * removed the CHLD handler that fscked up the return codes that I needed
    from close (became cruft anways since I dropped the unneccessary forking)
    It now also fails sanely on mirror failure conditions (closes:#203123)
  * allowing alternative URL scheme (with apt-cacher?/server/...) which does
    work with alternative http daemons and added alternative dependency on boa
    and httpd-cgi (closes: #282599, #273776)
  * applied patch from Peter Denison <bug-reports@marshadder.uklinux.net> for
    more flexible names of index files (closes: #267680)
  * IPv6 & filtering patch by Darren Salt (closes: #294617, #278070)
  * added my patch to do basic URL filtering (closes: #307151)
  * README.Debian update to the new stuff, removed cruft in debian/debian-old
  * rewrote the import script, made it work more efficient and work around the
    epoch numbers in the file names from apt's cache (closes: #278799)
  * rewrote and simplified the cleanup script (closes: #299404), also added
    support for source files and bzip2 compression (closes: #261273, #305956).
    Also made it refresh the index files rather then relying on possibly
    outdated data (or missing data because of tiffani/apt-dupdate usage) and
    really lock them while reading to not kill the cached data because the
    file is beeing downloaded just while the cleanup process runs
  * changed install.pl to copy the ownership of new files/directories and only
    doing so when they are new, rather than resetting them to www-data, and on
    every package upgrade
  * added my apt-precache.pl script for people that may need this toy 
    (closes: #305175). It still needs some refinement to control the
    expiration of the "subscriptions".
  * added hooks for checksumming of forwarded packages
  * new feature: checksumming of data (downloaded and uploaded). Optionaly,
    see README.Debian for instructions to enable it (closes: #274059)

 -- Eduard Bloch <blade@debian.org>  Thu, 12 May 2005 09:01:03 +0200

apt-cacher (0.8.6) unstable; urgency=low

  * Added 'Packages.bz2' to list of allowed files.
    Closes: #298458
  * Check for $1 before evaluating it in cleanup script.
    Closes: #278778

 -- Jonathan Oxer <jon@debian.org>  Tue,  8 Mar 2005 09:34:33 +1100

apt-cacher (0.8.5) unstable; urgency=low

  * Changed package version to native numbering scheme.
    Closes: #282593
  * Default config now does not specify a range of allowed_hosts,
    so new installations will allow access to all clients by default.
    This reduces the default security but should help reduce the
    large number of "I've upgraded and now I can't use my cache" and
    "I've installed but nothing is allowed to connect" questions.
    Later this will be radically overhauled with Darren Salt's IPv6
    patch, but I don't want to make *too* many changes in one release.
    Closes: #264149
  * Applied patch by Eduard Bloch to alter the rate limit config
    handling, which improves handling of timeouts in corner cases.
    Closes: #258242
  * Cleaned syntax of scalar references in allowed_hosts processing.
    Closes: #272937, #272813
  * Added cleaning of udebs to cache cleaning script
    Closes: #271391
  * Removed build-deps on wget, apache and bzip2, plus dep on bzip2.
    Closes: #294613
  * 's/licence/license' typo fix in info output.
    Closes: #295616
  * Removed references to apt-cacher.org in the man page.
    Closes: #285725
  * Added support for caching Release.gpg files
    Closes: #283219
  * Altered install.pl to restart apache/apache-ssl/apache2 on configure.
    Closes: #285262
  * General cleanup of the working tree to remove build stamps, etc.

 -- Jonathan Oxer <jon@debian.org>  Thu, 17 Feb 2005 11:27:26 +1100

apt-cacher (0.8-4) unstable; urgency=low

  * Altered filename restriction regex to allow .tar.gz files.
    Closes: #259629

 -- Jonathan Oxer <jon@debian.org>  Tue, 20 Jul 2004 12:09:08 +1000

apt-cacher (0.8-3) unstable; urgency=low

  * Another file extension I missed: .udeb (used in the Debian
    installer).
    Closes: #259769

 -- Jonathan Oxer <jon@debian.org>  Sun, 18 Jul 2004 20:51:02 +1000

apt-cacher (0.8-2) unstable; urgency=low

  * Added file extensions used by source packages to the filename
    regex. Should now allow 'apt-get source ...' again.
    Closes: #259629

 -- Jonathan Oxer <jon@debian.org>  Fri, 16 Jul 2004 10:37:45 +1000

apt-cacher (0.8-1) unstable; urgency=low

  * New release with a whole new security mechanism: checks IP
    address of client and matches it against a range of addresses
    specified in the conf file using the 'allowed_hosts' directive.
    Closes: #251575

 -- Jonathan Oxer <jon@debian.org>  Tue, 13 Jul 2004 13:08:45 +1000

apt-cacher (0.7-3) unstable; urgency=low

  The "how many bugs can we fix at once?" release.
  * apt-cacher.pl: Check for undefined value which was showing an
    error in the log.
    Closes: #231187
  * apt-cacher.pl: Fix version number displayed
    Closes: #257409
  * remove.pl: Now removes logrotate file on removal of package
    (shouldn't this be taken care of by DPKG? The logrotate file
    is installed by it, so it should remove it. Anyway...)
    Closes: #253828
  * apt-cacher.pl: Expires 'Sources.gz' file now in addition to
    Packages.gz and Release (Thanks to Andreas Beckmann)
    Closes: #237889
  * apt-cacher.pl and apt-cacher.conf: Rate limiting by passing a
    '--rate-limit' argument to Wget. Thanks to Torbjorn Svensson
    for the patch!
    Closes: #255361
  * install.pl and remove.pl: No longer patches httpd.conf with an
    alias. Now just symlinks to the apache config snippet from
    conf.d, so we never touch httpd.conf. No more runaway entries!
    Closes: #242365
  * install.pl: Activates cgi module in Apache2.
    Closes: #250599
  * apt-cacher.pl: Check for name of file being requested. As a
    partial answer to bug #251575 (still to be fixed properly) the
    name of the file is now checked. If it isn't a .deb, .rpm,
    Packages.gz, Sources.gz or Release file it's rejected with 403
    Forbidden. That may trip up people if they don't compress the
    Packages file, so if this causes grief please let me know ASAP.

 -- Jonathan Oxer <jon@debian.org>  Tue,  6 Jul 2004 15:11:19 +1000

apt-cacher (0.7-2) unstable; urgency=low

  * apt-cacher-report.pl: Not much visibly different, but most of
    the internals have been re-written after I started with just
    fixing #230934 and then couldn't stop myself:
     o Added support for reading rolled/compressed logfiles.
     o Fixed previously undetected bug introduced in 0.6-11 by the
       date handling patch: that change caused the latest logfile
       to nuke the logfile array, causing old logfiles to be
       ignored even though they were being opened. Doh!
     o Check for zero value of traffic and assign hit and miss
       values manually to fix divide by zero error.
       Closes: #230934
     o Set strings for start and end date if no records found.
     o Check size of traffic values (total, hit, miss) and set
       human-readable report strings in MB, or if >2000MB as GB
       rounded to 3 decimal places.

 -- Jonathan Oxer <jon@debian.org>  Wed,  4 Feb 2004 10:20:35 +1100

apt-cacher (0.7-1) unstable; urgency=low

  * apt-cacher-import.pl: At long last. I've answered the
    question "why can't I just copy .debs into the cache dir?"
    sooooo many times that I've finally done something about it.
    This supporting script traverses $cache_dir/import and imports
    any .debs it finds into $cache_dir. More info in 'man apt-cacher'.
    Of course, I did it in a half-assed way with a helper script
    rather than making it work transparently within apt-cacher.pl
    itself. Fixes welcome! Also fixes for the cludgy shell in it.
    Closes: #229466, #221576

 -- Jonathan Oxer <jon@debian.org>  Fri, 30 Jan 2004 11:59:55 +1100

apt-cacher (0.6-11) unstable; urgency=low

  * apt-cacher-cleanup.pl: Fix for neater handling of empty 
    Packages files. Patch by Lupe Christoph <lupe@lupe-christoph.de>.
    Closes: #225505
  * apt-cacher-report.pl: Fix for incorrect date handling when
    generating reports. Patch by Paul Schulz <pschulz@foursticks.com>.
    Closes: #218426
  * install.pl and remove.pl: Added support for auto-configuring 
    Apache2 on installation and removal. Note that I don't run it
    with Apache2 myself, so feedback on this is welcome.
    Closes: #197930
 -- Jonathan Oxer <jon@debian.org>  Tue, 30 Dec 2003 22:00:26 +1100

apt-cacher (0.6-10) unstable; urgency=low

  * apt-cacher.pl: Altered the mix of direct and system calls
    to where possible use system calls (ie: read->sysread, seek->
    sysseek, open->sysopen) at the suggestion of my favorite bug
    detective Peter Hawkins, to fix a potential infinite loop
    situation on file reads - but hey, this is Linux, isn't it 
    meant to do infinite loops in 5 seconds? :-P
    Closes: #196684
  * install.pl: Added prompts for SSL cert password on Apache
    restart at the suggestion of Brian Hunt.
  * remove.pl: Updated to use the config file parser in 
    apt-cacher-lib.pl rather than the old-style internal parser.
    Added prompts for SSL cert password on Apache restart.
  * upgrade.pl: Updated to use the config file parser in 
    apt-cacher-lib.pl rather than the old-style internal parser.
 -- Jonathan Oxer <jon@debian.org>  Tue, 10 Jun 2003 11:35:19 +1000

apt-cacher (0.6-9) unstable; urgency=low

  * apt-cacher.pl: Daniel Stone contributed a lot to this one, 
    providing me with an earlier version with changes in it to
    help fix the hated 500 Internal Server Error bug by catching a
    state where Wget makes a new file rather than truncating, and 
    thus changes the file descriptor out from under us. Those 
    changes were then merged forward to the most recent devel 
    version.
    Also added 'seek' command to handle reading files of varying 
    length, such as packages that are currently in the process of 
    being downloaded and are not the full length at the time 
    apt-cacher tries to stream them to the client: that patch and a 
    Perl lesson supplied by Adam Moore.
    Also changed the 'read' call to use sysread, at the suggestion 
    of Andreas Boeckler.
    All those changes together help prevent the 500 Internal Server 
    Error bug occuring in different situations. Thanks Daniel, Adam 
    and Andreas! Hopefully that stupid bug is gone for good now. 
    Yippee!
    Closes: #171059
  * apt-cacher.pl: More changes provided by Daniel Stone to fix a 
    potential race condition discovered by some very nice detective
    work by Peter Hawkins. Peter patched his local server, Daniel
    incorporated the changes into the version he sent me  :-)
    Closes: #180571
  * apt-cacher-cleanup.pl: Fixed references to configuration
    settings using a patch supplied by Stephan Niemz. Thanks Stephan!
    Closes: #184425

 -- Jonathan Oxer <jon@debian.org>  Thu, 26 May 2003 14:36:12 +1100

apt-cacher (0.6-8) unstable; urgency=low

  * apt-cacher-cleanup.pl, apt-cacher-report.pl, apt-cacher.pl, 
    apt-cacher-lib.pl: fixes by Jeff Williams to make the config
    parser use hashrefs. Thanks again Jeff!

 -- Jonathan Oxer <jon@debian.org>  Tue, 18 Feb 2003 11:00:56 +1100

apt-cacher (0.6-7) unstable; urgency=low

  * debian/apt-cacher.logrotate: added a logrotate config to roll
    access and error logs monthly. Thanks to Jacob Luna Lundberg
    for the suggestion!
  * apt-cacher-cleanup.pl: converted logfile reader to use proper
    Perl rather than kludgy shell, and to read the most recently
    rotated log if one exists.
  * apt-cacher-lib.pl: a new library for apt-cacher that so far
    only contains the config file parser, so that a lot of
    duplicate code can be ripped out of the main scripts. Based on
    a patch sent in by Jeff Williams. Thanks Jeff!
    
 -- Jonathan Oxer <jon@debian.org>  Mon, 10 Feb 2003 15:16:41 +1100

apt-cacher (0.6-6) unstable; urgency=low

  * apt-cacher-cleanup.pl: major rewrite by Jacob Luna Lundberg,
    including changes to handle varying header length of compressed
    packages, use of Compress::Zlib if available, and nicer handling
    of an empty cache (no longer generates output if the cache is
    empty). Thanks Jacob!
    Closes: #172732

 -- Jonathan Oxer <jon@debian.org>  Fri, 13 Dec 2002 16:12:31 +1100

apt-cacher (0.6-5) unstable; urgency=low

  * remove.pl: added check for existence of apache and apache-ssl
    config files prior to attempted un-configuration (thanks to
    Blars Blarson for the patch!)
    Closes: #168825

 -- Jonathan Oxer <jon@debian.org>  Fri, 22 Nov 2002 16:12:10 +1100

apt-cacher (0.6-4) unstable; urgency=low

  * debian/control: Added apache-ssl as an alternative Depends to
    apache
  * install.pl: Checks for existence of startup scripts for both
    apache and apache-ssl, and restarts either / both
  * install.pl: Checks for and patches config files for both
    apache and apache-ssl
  * remove.pl: Checks for existence of startup scripts for both
    apache and apache-ssl, and restarts either / both
  * remove.pl: Removes patches applied to both apache and
    apache-ssl
    Closes: #167521

 -- Jonathan Oxer <jon@debian.org>  Mon,  4 Nov 2002 15:14:56 +1100

apt-cacher (0.6-3) unstable; urgency=low

  * Added cache cleanup script to flush out old .debs from the
    cache. Woohoo, at last!
    Closes: #159320
  * debian/control: Added Depends: Bzip2 because the cache cleaning
    script needs to use zgrep

 -- Jonathan Oxer <jon@debian.org>  Thu, 31 Oct 2002 17:47:36 +1100

apt-cacher (0.6-2) unstable; urgency=low

  * debian/control: Added Depends: Apache, Wget, Perl (oops!)
    Closes: #159832
  * debian/postinst: Removed doc symlink

 -- Jonathan Oxer <jon@debian.org>  Fri, 18 Oct 2002 16:08:27 +1000

apt-cacher (0.6-1) unstable; urgency=low

  * apt-cacher.pl: Improved handling of 404 (file not found) 
    errors: fetcher now returns a 404 to the client when it detects 
    a 404 from the nominated source, rather than letting the client 
    time out. Patch submitted by Jacob Luna Lundberg.
  * debian/install.pl: Fixes to the install script so that it 
    complies with the new logdir directive.
    Closes: #159605
  * debian/man.1: Updates to the man page to reflect the config 
    file changes.
  * debian/upgrade.pl: Split off portions of the remove script to 
    create a new upgrade script to prevent the cache contents being 
    nuked when upgrading.
  * apt-cacher.pl: Major cosmetic update to the info page that is 
    displayed when apt-cacher is called with no arguments, and 
    addition of config values to info page for debug purposes.
  * apt-cacher-report.pl: Addition of script to parse the access 
    log and generate a traffic report.
  * apt-cacher.conf: Addition of 'generate_reports' directive.
  * apt-cacher.conf: Addition of 'admin_email' directive for 
    display in info page.
  * debian/apt-cacher: Daily cron job to run the report script
    if the generate_reports directive is set.
  
 -- Jonathan Oxer <jon@debian.org>  Fri,  6 Sep 2002 09:21:34 +1000

apt-cacher (0.5-6) unstable; urgency=low

  * Improved package description at Martin Schulze's suggestion.
    Closes: #159342
  * Fetcher now sets mod time on downloaded files to the current
    time to prevent them being prematurely expired (patch submitted 
    by Raphael Goulais <raphael@nicedays.net>).
    Closes: #159314
  * Modified config file format to remove 'accesslog' and 'errorlog'
    directives, and replace them with a 'logdir' directive.
  * Modified command parser to provide framework for the traffic
    reporting facilities intended for a future release.
  * Updated postinst and prerm scripts to set/remove the doc symlink
    for the transition to FHS.

 -- Jonathan Oxer <jon@debian.org>  Tue,  3 Sep 2002 17:19:27 +1000

apt-cacher (0.5-5) unstable; urgency=low

  * Closes: #151109 (original ITP)

 -- Jonathan Oxer <jon@debian.org>  Mon, 19 Aug 2002 09:35:05 +1000

apt-cacher (0.5-4) unstable; urgency=low

  * Minor bugfixes for the configuration file parser.

 -- Jonathan Oxer <jon@ivt.com.au>  Tue, 23 Apr 2002 21:37:02 +1000

apt-cacher (0.5-3) unstable; urgency=low

  * Added support for working through an external http proxy such as
    Squid (useful when your ISP blocks port 80).

 -- Jonathan Oxer <jon@ivt.com.au>  Tue, 23 Apr 2002 18:09:38 +1000

apt-cacher (0.5-2) unstable; urgency=low

  * Updated config file parser to handle comments, blank lines and
    spaces.

 -- Jonathan Oxer <jon@ivt.com.au>  Tue, 23 Apr 2002 17:49:03 +1000

apt-cacher (0.5-1) unstable; urgency=low

  * Initial release as a Debian package.

 -- Jonathan Oxer <jon@ivt.com.au>  Fri,  5 Apr 2002 23:30:07 +1000
